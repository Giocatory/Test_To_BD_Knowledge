{% extends "base.html" %}

{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞{% endblock %}

{% block header %}
  <h1>üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
  <p>–í–∞—à–∞ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å –ø–æ SQL</p>
{% endblock %}

{% block content %}
  <div style="text-align: center; margin-bottom: 30px;">
    <div style="font-size: 4.5rem; font-weight: bold; margin: 10px 0; 
                background: linear-gradient(135deg, var(--correct-color) 0%, #3498db 100%);
                -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
      {{ score }}%
    </div>
    
    <div class="score-badge 
      {% if score >= 90 %}style='background: var(--correct-color); color: white;'
      {% elif score >= 80 %}style='background: var(--warning-color); color: white;'
      {% elif score >= 70 %}style='background: var(--warning-color); color: white;'
      {% else %}style='background: var(--incorrect-color); color: white;'{% endif %}">
      {% if score >= 90 %}–û—Ç–ª–∏—á–Ω–æ!
      {% elif score >= 80 %}–•–æ—Ä–æ—à–æ
      {% elif score >= 70 %}–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ
      {% else %}–ù–ï –°–î–ê–õ!!!{% endif %}
    </div>
    
    <div class="stats">
      <div class="stat-item">
        <div class="stat-number">{{ correct }}</div>
        <div>–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ total - correct }}</div>
        <div>–æ—à–∏–±–æ–∫</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">{{ total }}</div>
        <div>–≤—Å–µ–≥–æ</div>
      </div>
    </div>
  </div>
  
  <div style="margin-bottom: 40px;">
    {% for result in results %}
      <div class="result-item {% if result.is_correct %}result-correct{% else %}result-incorrect{% endif %}">
        <div class="question-number">
          <span class="status-icon">{% if result.is_correct %}‚úÖ{% else %}‚ùå{% endif %}</span>
          –í–æ–ø—Ä–æ—Å {{ loop.index }}
        </div>
        <div style="margin: 12px 0; font-size: 1.1rem; line-height: 1.5;">
          {{ result.question }}
        </div>
        
        <div class="answer-box {% if result.is_correct %}user-correct{% else %}user-incorrect{% endif %}">
          {% if result.user_answer %}
            –í–∞—à –æ—Ç–≤–µ—Ç: <strong>{{ result.user_answer }}. {{ result.options[result.user_answer - 1] }}</strong>
          {% else %}
            <em>–í–æ–ø—Ä–æ—Å –Ω–µ –±—ã–ª –æ—Ç–≤–µ—á–µ–Ω</em>
          {% endif %}
        </div>
        
        <div class="correct-answer">
          –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <strong>{{ result.correct_answer }}. {{ result.options[result.correct_answer - 1] }}</strong>
        </div>
      </div>
    {% endfor %}
  </div>
  
  <form method="post" action="/restart">
    <button type="submit" class="btn btn-block">
      üîÑ –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
    </button>
  </form>
  
  <div style="margin-top: 25px; padding: 15px; background: #e8f4ff; border-radius: 8px; border: 1px solid #bbdefb; text-align: center;">
    <strong>üí° –°–æ–≤–µ—Ç:</strong> –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ–º—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –∏—Å–ø—ã—Ç–∞–ª–∏ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏—è.
  </div>
{% endblock %}